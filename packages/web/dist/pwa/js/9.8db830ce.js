(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"0415":function(s,t,e){},"4f42":function(s,t,e){"use strict";e.r(t);var r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"UserSettings q-pa-md"},[e("h2",{staticClass:"text-h4"},[s._v("用户")]),e("form",{staticClass:"UserSettings-Form",on:{submit:s.setPassword}},[e("MInput",{staticClass:"UserSettings-Section",attrs:{type:"password",placeholder:"旧密码",clearable:""},scopedSlots:s._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"lock"}})]},proxy:!0}]),model:{value:s.oldPassword,callback:function(t){s.oldPassword=t},expression:"oldPassword"}}),e("MInput",{staticClass:"UserSettings-Section",attrs:{type:"password",placeholder:"新密码",clearable:"",error:!s.same},scopedSlots:s._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"security"}})]},proxy:!0}]),model:{value:s.newPassword,callback:function(t){s.newPassword=t},expression:"newPassword"}}),e("MInput",{staticClass:"UserSettings-Section",attrs:{type:"password",placeholder:"重复新密码",clearable:"",error:!s.same},scopedSlots:s._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-mr-sm",attrs:{name:"security"}})]},proxy:!0}]),model:{value:s.confirmPassword,callback:function(t){s.confirmPassword=t},expression:"confirmPassword"}}),e("q-btn",{staticStyle:{height:"30px"},attrs:{color:"primary",label:"更改密码",rounded:"",size:"x-small",type:"submit",ripple:!1,disabled:!s.canSet}}),e("q-btn",{staticClass:"q-ml-md",staticStyle:{height:"30px"},attrs:{color:"primary",label:"忘记密码",flat:"",rounded:"",size:"x-small",ripple:!1}},[e("q-menu",{attrs:{"content-class":"q-pa-sm pop"}},[e("QMarkdown",{attrs:{src:s.md.forgetPassword}})],1)],1)],1)])},a=[],n=e("ded3"),o=e.n(n),i=e("2f62"),c=e("365c"),d=e("06e5"),l="请前往服务器：`hexon/packages/server/data/sjson.db`\n\n将 `config.auth.password`\n\n设置为 `7b2e9f54cdff413fcde01f330af6896c3cd7e6cd`\n\n这将重置密码为 `admin`\n";const u={MInput:d["a"]};var p={name:"UserSettings",components:u,data(){return{oldPassword:"",newPassword:"",confirmPassword:"",error:"",md:{forgetPassword:l}}},computed:o()(o()({},Object(i["d"])("user",{name:s=>{var t,e;return null===s||void 0===s||null===(t=s.info)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.name}})),{},{same(){return!this.newPassword||!this.confirmPassword||this.newPassword===this.confirmPassword},message(){return this.same?this.error:"两次输入的密码不一致"},canSet(){return this.newPassword&&this.confirmPassword&&this.same}}),methods:{setPassword(){c["a"].auth.setPassword(this.name,this.oldPassword,this.newPassword).then((()=>{this.$notify({title:"修改成功，请用新密码登陆",type:"success",duration:1e4}),this.$store.dispatch("user/logout").then((()=>{this.$router.push("/login")}))})).catch((s=>{this.$notify({title:"修改失败",text:s,type:"error",duration:5e3})}))}}},m=p,w=(e("9654"),e("2877")),f=e("0016"),h=e("9c40"),P=e("4e73"),b=e("eebe"),y=e.n(b),S=Object(w["a"])(m,r,a,!1,null,"37d6a4df",null);t["default"]=S.exports;y()(S,"components",{QIcon:f["a"],QBtn:h["a"],QMenu:P["a"]})},9654:function(s,t,e){"use strict";e("0415")}}]);